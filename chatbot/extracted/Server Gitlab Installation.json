{
  "filename": "Server Gitlab Installation.pdf",
  "content": "ðŸ“Œ Documentation : Installation et \nConfiguration de GitLab avec IntÃ©gration \nGitHub\nðŸ› ï¸ 1. Installation de GitLab sur Ubuntu 22.04\nâœ… Ã‰tape 1 : Mettre Ã  jour le systÃ¨me et Configurer le pare-feu\n```bash\nsudo apt update && sudo apt upgrade -y\n```\n```bash\nsudo ufw allow http\n```\n```bash\nsudo ufw allow https\n```\n```bash\nsudo ufw allow OpenSSH\n```\n```bash\nsudo ufw reload\n```\n```bash\nsudo ufw enable\n```\nâœ… Ã‰tape 2 : Installer les dÃ©pendances nÃ©cessaires\n```bash\nsudo apt install -y curl openssh-server ca-certificates tzdata perl\n```\nâœ… Ã‰tape 3 : Ajouter le dÃ©pÃ´t GitLab\n```bash\ncurl -fsSL https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/scri\n```\npt.deb.sh | sudo bash\nâœ… Ã‰tape 4 : Installer GitLab\n```bash\nsudo apt install -y gitlab-ce\n```\nSans titre\n1\n\nâœ… Ã‰tape 5 : Configurer GitLab\nModifier l'URL externe dans le fichier de configuration GitLab :\n```bash\nsudo nano /etc/gitlab/gitlab.rb\n```\nRemplacez la ligne suivante :\nexternal_url 'http://192.168.193.130'\nAppliquer la configuration :\n```bash\nsudo gitlab-ctl reconfigure\n```\nâœ… Ã‰tape 6 : VÃ©rifier le statut de GitLab et AccÃ©der Ã  l'interface \nWeb\n```bash\nsudo gitlab-ctl status\n```\nhttp://192.168.193.130\n```bash\nsudo cat /etc/gitlab/initial_root_password\n```\nðŸ” 2. Configuration des ClÃ©s SSH\nâœ… Ã‰tape 1 : GÃ©nÃ©rer une clÃ© SSH (si ce n'est pas dÃ©jÃ  fait)\nssh-keygen -t rsa -b 4096 -C \"votre-email@example.com\"\nAppuyez sur EntrÃ©e pour accepter le chemin par dÃ©faut.\nâœ… Ã‰tape 2 : Ajouter la clÃ© SSH Ã  lâ€™agent SSH\neval $(ssh-agent -s)\nssh-add ~/.ssh/id_rsa\nâœ… Ã‰tape 3 : Ajouter la clÃ© SSH Ã  GitLab\nSans titre\n2\n\nAfficher la clÃ© publique :\ncat ~/.ssh/id_rsa.pub\n1. Copiez la clÃ©.\n2. Allez sur GitLab â†’ Profile Settings  â†’ SSH Keys .\n3. Collez la clÃ© et cliquez sur Add Key.\nâœ… Ã‰tape 4 : Tester la connexion SSH avec GitLab\nssh -T git@192.168.193.130\nVous devriez voir :\nWelcome to GitLab, @votre-utilisateur!\nðŸ”‘ 3. Configuration des Tokens dâ€™AccÃ¨s GitLab\nâœ… Ã‰tape 1 : GÃ©nÃ©rer un Token GitLab\n1. Aller dans GitLab â†’ User Settings  â†’ Access Tokens .\n2. CrÃ©er un nouveau token avec ces permissions :\napi\nread_repository\nwrite_repository\n3. Copier le token gÃ©nÃ©rÃ©.\nâœ… Ã‰tape 2 : Tester l'accÃ¨s API GitLab\nTOKEN_GITLAB=\"glpat_xxxxxxxxxxxxxxxxxxxxxxxxxxxx\"\nGITLAB_URL=\"http://192.168.193.130\"\nSans titre\n3\n\n```bash\ncurl --header \"PRIVATE-TOKEN: $TOKEN_GITLAB\" \"$GITLAB_URL/api/v4/proj\n```\nects\"\nðŸ”— 4. Connexion GitLab avec un Compte GitHub\nâœ… Ã‰tape 1 : CrÃ©er une Application OAuth GitHub\n1. Aller sur GitHub Developer Settings.\n2. CrÃ©er une nouvelle application OAuth avec :\nHomepage URL : http://192.168.193.130\nAuthorization callback URL : http://192.168.193.130/users/auth/github/callback\n3. Copier le Client ID et Client Secret gÃ©nÃ©rÃ©s.\nâœ… Ã‰tape 2 : Activer GitHub OAuth dans GitLab\nModifier le fichier de configuration GitLab :\n```bash\nsudo nano /etc/gitlab/gitlab.rb\n```\nAjouter ces lignes :\ngitlab_rails['omniauth_enabled'] = true\ngitlab_rails['omniauth_allow_single_sign_on'] = ['github']\ngitlab_rails['omniauth_auto_sign_in_with_provider'] = 'github'\ngitlab_rails['omniauth_providers'] = [\n  {\n    \"name\" => \"github\",\n    \"app_id\" => \"VOTRE_CLIENT_ID\",\n    \"app_secret\" => \"VOTRE_CLIENT_SECRET\",\n    \"args\" => { \"scope\" => \"user:email\" }\n  }\n]\nAppliquer la configuration :\nSans titre\n4\n\n```bash\nsudo gitlab-ctl reconfigure\n```\nðŸ“¥ 5. Importation des Projets GitHub vers GitLab\nâœ… Ã‰tape 1 : Lister les repositories GitHub\nTOKEN_GITHUB=\"ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxx\"\n```bash\ncurl -H \"Authorization: token $TOKEN_GITHUB\" \\\n```\n     -H \"Accept: application/vnd.github.v3+json\" \\\n     https://api.github.com/user/repos?per_page=100 | jq -r '.[].clone_url'\nâœ… Ã‰tape 2 : Importer un projet GitHub spÃ©cifique dans GitLab\nExemple pour testpipeline  :\nGITHUB_REPO=\"https://github.com/motrabelsi10/testpipeline.git\"\nGITLAB_REPO=\"git@192.168.193.130:motrabelsi10/testpipeline.git\"\ngit clone --mirror \"$GITHUB_REPO\"\ncd testpipeline.git\ngit remote remove origin\ngit remote add origin \"$GITLAB_REPO\"\ngit push --mirror origin\nâœ… Ã‰tape 3 : VÃ©rifier l'importation sur GitLab\ngit ls-remote git@192.168.193.130:motrabelsi10/testpipeline.git\nSi la sortie est vide, vÃ©rifier :\nLes permissions du token GitLab\nL'URL du remote\nLes logs GitLab avec sudo gitlab-ctl tail\nðŸ”„\nSans titre\n5\n\nðŸ”„ 6. Configuration Git avec Joget\n1. Aller dans Joget â†’ Settings  â†’ Git Integration\n2. Entrer l'URL du dÃ©pÃ´t GitLab :\nhttp://192.168.193.130/motrabelsi10/joget-app.git\n3. Ajouter le nom d'utilisateur GitLab : motrabelsi10\n4. Utiliser le Token GitLab gÃ©nÃ©rÃ© prÃ©cÃ©demment\n5. Cocher les options :\nâœ… Always Pull from Remote Server\nâœ… Auto Sync DB From Git\n6. Enregistrer la configuration et tester la connexion\nðŸ”„ 7. Modifier le Jenkinsfile pour GitLab\nDans le pipeline Jenkins, modifier le Checkout Code  :\nstages {\n    stage('Checkout Code') {\n        steps {\n            script {\n                echo \"ðŸ“¥ Cloning repository: main\"\n            }\n            git branch: 'main', url: 'http://192.168.193.130/motrabelsi10/yoyo.git'\n        }\n    }\n}\nðŸš€ GitLab est maintenant prÃªt pour Ãªtre utilisÃ© avec Joget et Jenkins !\nSans titre\n6\n\n"
}